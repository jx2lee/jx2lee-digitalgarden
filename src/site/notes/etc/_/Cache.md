---
{"dg-publish":true,"permalink":"/etc/_/Cache/","dgPassFrontmatter":true,"created":"","updated":""}
---


ByteByteGo 라는 구독 서비스가 있는데, 매일같이 무료 뉴스레터를 구독하고 있다. `cache` 에 대한 내용을 받았는데 이를 간단히 정리한다.

# overview
- definition
	- "캐시는 **데이터에 대한 요청을 더 빠르게 처리할 수 있도록 데이터를 저장하는 하드웨어 또는 소프트웨어 구성 요소**로, 캐시에 저장된 데이터는 이전 계산의 결과이거나 다른 곳에 저장된 데이터의 복사본일 수 있습니다." from wiki
- without cache
	- ![](https://i.imgur.com/YAfIxl4.png)
- with cache
	- ![](https://i.imgur.com/sIxCMy5.png)
		- (1) 데이터가 요청되면 서비스는 먼저 캐시에서 데이터를 확인한다.
		- (2) 캐시에 데이터가 있으면 신속하게 서비스로 반환한다.
		- (3a, 3b) 캐시에 데이터가 없는 경우 서비스는 스토리지에서 데이터를 검색한다.
		- (3c) 캐시에 저장한 다음 클라이언트에 응답한다.
- cache vs storage
	1. 캐시 시스템은 자주 액세스하는 데이터를 메모리에 저장한다.
		- 스토리지 시스템은 디스크에 데이터를 저장한다.
		- 메모리는 디스크보다 비싸기 때문에 캐시 시스템은 일반적으로 스토리지 시스템보다 데이터 용량이 훨씬 작다.
		- 즉, 캐시 시스템은 전체 데이터 세트의 하위 집합만 저장한다.
	2. 캐시 시스템에 저장된 데이터는 장기적인 데이터 지속성(long-term data persistence) 및 내구성(durability)을 위한 설계는 아니다.
		- 캐시는 성능 향상을 위해 사용한다.
		- 내구성(durability) 있는 데이터 스토리지를 제공하지 않는다. 
			- 반면 스토리지 시스템은 장기적인 데이터 지속성과 내구성을 제공하도록 설계되어 필요할 때 항상 데이터를 사용할 수 있도록 보장한다.
	3. 대용량 트래픽과 높은 동시성을 지원한다.
		- 캐시 서버는 메모리에 데이터를 저장함으로써 들어오는 요청에 신속하게 응답할 수 있다.
			- 이는 트래픽이 많은 웹사이트나 애플리케이션에 매우 중요하다.
		- 반면 스토리지 시스템은 대량의 데이터를 안정적으로 저장하고 관리하는 데 더 적합하다.
- measurement
	- 요청된 데이터가 캐시에서 사용 가능한 경우 이를 캐시 히트(**cache hit**)라고 하며, 그렇지 않은 경우 캐시 미스(cache miss)라고 한다.
	- 캐시에서 데이터에 액세스하는 것이 스토리지에서 액세스하는 것보다 훨씬 빠르기 때문에 캐시 히트가 많을 때 시스템이 전반적으로 더 효율적으로 작동한다.
	- 캐시 성능(effectiveness) 캐시 히트 횟수를 캐시 요청 횟수로 나눈 값인 캐시 히트 비율(cache hit ratio)로 측정한다.
		- $cache hit = \frac{cache\,hit}{cache\,request}$
		- 이 비율이 높을수록 전반적인 성능이 좋다.

# Where is caching used
![](https://i.imgur.com/5ceP7gU.png)
- modern computer
	- L1, L2, L3 캐시를 비롯한 여러 수준의 캐시를 활용하여 CPU가 자주 사용하는 데이터에 빠르게 액세스할 수 있도록 한다.
	- 메모리 관리 장치(MMU, Memory Management Unit)는 가상 메모리 주소를 실제 메모리 주소에 매핑하는 역할을 담당한다.
		- MMU에는 주소 변환 프로세스의 속도를 높이기 위해 가장 최근에 사용된 주소 변환을 저장하는 TLB(Translation Lookaside Buffer)라는 특수 캐시를 포함한다.
	- 운영 체제는 전반적인 시스템 성능을 향상시키기 위해 주 메모리에 페이지 캐시를 사용한다.
		- 페이지 캐시는 자주 액세스하는 데이터 페이지를 저장하고 시스템 속도를 저하시킬 수 있는 디스크 액세스 횟수를 줄인다.
- software
	- browser
		- 브라우저는 캐시를 사용하여 자주 액세스하는 웹사이트 이미지, 데이터 및 문서를 저장하므로 로드 시간이 빨라져 환경이 원활해진니다. 이 캐시를 일반적으로 브라우저 캐시(browser cache)라고 한다.
	- CDNs(Content Delivery Networks)
		- 이미지, 동영상, CSS 파일 및 기타 멀티미디어 콘텐츠와 같은 정적 리소스를 전송하는 데 사용되는 캐싱의 또 다른 형태이다.
		- 지리적으로 분산된 프록시 서버의 네트워크로, 가장 가까운 서버에서 사용자 위치로 콘텐츠를 전송하기 위해 작동한다.
			- 이를 통해 콘텐츠에 액세스하는 데 걸리는 시간이 크게 단축되어 웹사이트 로딩 속도가 빨라진다.
	- database
		- 데이터베이스의 캐싱은 성능을 개선하고 실행 오버헤드를 줄이는 데 필수적이다.
		- 데이터베이스에서 볼 수 있는 일반적인 캐시에는 버퍼 캐시, 결과 캐시, 쿼리 캐시, 메타데이터 캐시, 세션 캐시가 있다.
		- 이러한 캐시는 자주 액세스하는 데이터 블록, 쿼리 결과, 메타데이터 및 세션별 정보를 메모리에 저장하여 디스크 읽기 및 쿼리 실행 시간을 줄인다.
- Caching 은 데이터가 **자주 변경되지 않거나**, **동일한 데이터에 여러 번 액세스**하거나, **동일한 출력을 반복적으로 생성**되거나, 시간이 많이 걸리는 쿼리 또는 계산결과 등 가치가 있는 경우 효과적인 솔루션이다.

# reference

[https://blog.bytebytego.com/p/a-crash-course-in-caching-part-1?utm_source=substack&utm_medium=email](https://blog.bytebytego.com/p/a-crash-course-in-caching-part-1?utm_source=substack&utm_medium=email)